#############################################
Walkthrough: コンポーネントのパーソナライズ
#############################################

パーソナライズすることで、訪問者にターゲットを絞ったコンテンツを配信することができます。たとえば、訪問者の閲覧行動や蓄積されたプロファイル値に基づいて、パーソナライズされたコンテンツを訪問者に表示するルールを実装することができます。

エクスペリエンス エディタでは、異なるサイト訪問者にどのコンテンツを表示するかを決定するルールを作成することができます。これらは、パーソナライズ ルールまたは条件付きレンダリングと呼ばれます。

目標、キャンペーン、エンゲージメントバリューポイント、プロファイルバリューポイント、エンゲージメントプランなど、さまざまな基準に基づいてパーソナライズルールを作成できます。ウェブサイトは、特定のコンテンツを表示したり、コンテンツを非表示にしたり、コンポーネントの動作を調整したりすることで、パーソナライゼーション ルールにリアルタイムで反応します。

この例では、訪問者がパンフレットをダウンロードするためのリンクを表示したときに決定するルールを作成する方法を示しています。

*** シナリオ***

ウェブサイトでは、ホームページを除くすべてのページにパンフレットをダウンロードするためのリンクを表示しています。パーソナライゼーションルールでは、「当社のサービス」ページのパンフレットリンクは、リードスコアが50以上の訪問者にのみ表示されるように指定されています。

*******************************
パーソナライズルールを作成する
*******************************

パーソナライズルールを作成するには、例えばリードスコアが50以上の訪問者に特定のパンフレットを表示するなど、満たすべき条件を指定します。

.. note:: パーソナライズ ルールを作成する前に、パーソナライズ ルールに関連付けるすべてのコンテンツを準備しておく必要があります。パーソナライズされたコンポーネントのレイアウトを変更する場合は、関連するレンダリング アイテムも準備しておく必要があります。

パーソナライズ ルールを作成するには

1. エクスペリエンス エディタで、[表示] タブをクリックし、[有効化] グループで [デザイン] チェックボックスを選択してデザイン機能を有効にします。
2. パーソナライズ ルールを実装するページに移動します。この例では、サービス ページを編集します。
3. サイドバーで、[詳細情報が必要] セクションをクリックし、表示されるフローティング ツールバーで、[このコンポーネントのパーソナライゼーションを作成または編集する] をクリックします。 |icon1|

.. |icon1| image:: images/15ed64a2222528.png

.. image:: images/15ed64a2225f9b.png
    :align: center
    :width: 400px
    :alt: パーソナライズルールを作成する

4. [コンポーネントの個人設定]ダイアログボックスで、[個人設定ルールの追加] |icon2| をクリックします。

.. |icon2| image:: images/15ed64a222ad5c.png

5. 新しい条件には適切な名前を付けてください。

.. image:: images/15ed64a2238988.png
    :align: center
    :width: 400px
    :alt: パーソナライズルールを作成する

Sitecoreは、Personalize the componentダイアログボックスに表示された順番で、パーソナライズルールを評価します。訪問者が条件で指定されたルールを満たさない場合、Sitecoreは次の条件に移動し、訪問者がいずれかの条件を満たすまで、次の条件に移動します。訪問者が他の条件を満たしていない場合は、デフォルトの条件が使用されます。

6. 新しいコンポーネントの条件を定義するには、[ルールの編集]をクリックし、:doc:`[ルールの作成]ダイアログボックス <the-rule-set-editor>` の[条件の選択]フィールドで、1つまたは複数の条件を選択します。

   この例では、[検索] フィールドに検索ワード プロファイル キーを入力します。次の条件をクリックします。

   ここで、インタラクション プロファイルの特定のプロファイル キーの値が特定の値と比較されます。

   条件は、ルールの編集セクションに表示されます。

    .. image:: images/15ed64a223dc46.png
        :align: center
        :width: 400px
        :alt: パーソナライズルールを作成する

    .. note:: 行動が特定のパターンカードにマッピングされている訪問者にのみ適用されるパーソナライズルールを作成するには、現在の訪問が特定のプロファイルの特定のパターンカードと一致する条件をクリックします。

7. 条件の値を編集します。これを行うには、[ルールの編集] フィールドのリンクをクリックします。

    * 最初のリンクには、when または where という単語が含まれています。このリンクをクリックすると、Sitecoreは条件を反転させ、whenとwhen以外の条件、またはwhereとwhere以外の条件を交互に表示します。
    * 2つ目のリンクには、specificという単語が含まれています。このリンクをクリックすると、ダイアログボックスが表示され、使用するアイテムやプロファイルを選択することができます。
    * その他のリンクには、比較や数値を含めることができます。これらのリンクをクリックすると、リンクに関連するオプションから選択できるダイアログボックスが表示されます。

この例では、リードスコアが50以上蓄積されている訪問者のみにパンフレットダウンロードリンクを表示させたいとします。ルールの編集]フィールドで[特定の]をクリックし、[プロファイルキーの選択]ダイアログボックスで、[スコア]を展開し、[リード]をクリックします。OKをクリックします。

    .. image:: images/15ed64a2242413.png
        :align: center
        :width: 400px
        :alt: パーソナライズルールを作成する

8. このルールの比較を選択するには、[ルールの編集]フィールドで、[比較先]をクリックします。比較の選択] ダイアログ ボックスで、[以上] または [等しい] をクリックし、[OK] をクリックします。

    .. image:: images/15ed64a2247465.png
        :align: center
        :width: 400px
        :alt: パーソナライズルールを作成する

9. 訪問者のリードプロファイルスコアが50以上の場合に「当社のサービス」ページにパンフレットダウンロードリンクを表示するには、特定の値をクリックして50と入力し、[OK]をクリックします。OK]をクリックして、[ルールの作成]ダイアログボックスを閉じます。これで、[コンポーネントのパーソナライズ]ダイアログボックスは次のように表示されます。

    .. image:: images/15ed64a224d2bb.png
        :align: center
        :width: 400px
        :alt: パーソナライズルールを作成する

**********************************
コンテンツをパーソナライズする
**********************************

パーソナライズルールを作成したら、ルール内の条件が満たされたときにページやコンポーネントに表示させるコンテンツを指定できます。コンテンツの非表示や表示、Web コントロールの動作や表示を調整することができます。

コンテンツを非表示または表示にするには

1. [コンポーネントのカスタマイズ] ダイアログ ボックスで、コンテンツを非表示にするルールの [非表示] をクリックします。この例では、[デフォルト] 条件が適用されている場合にコンポーネントを非表示にします。

    .. image:: images/15ed64a225494f.png
        :align: center
        :width: 400px
        :alt: コンテンツをパーソナライズする

この例では、訪問者が「当社のサービス」ページに来たときに、リードスコアが50以上の場合にのみ「Office Coreパンフレットのダウンロード」リンクが表示されます。デフォルトの状態は、訪問者のプロファイル値が 50 になるまで表示され、コンテンツが非表示になります。

2. ルールの異なるコンテンツを表示するには、[コンテンツ]フィールドで、|icon3| をクリックします。

.. |icon3| image:: images/15ed64a225a689.png

3. 関連付けられたコンテンツの選択 ダイアログ ボックスで、コンテンツ ツリーをナビゲートするか、条件が満たされたときに表示するアイテムを検索します。

    .. image:: images/15ed64a225e073.png
        :align: center
        :width: 400px
        :alt: コンテンツをパーソナライズする

    .. note:: そのアイテムは、現在のレンダリングアイテムと互換性がある必要があります。たとえば、Web フォームのアイテムには Web フォームのレンダリングを使用する必要があります。

4. パーソナライズするコンテンツの選択が終わったら、OKをクリックします。

ページを公開すると、パーソナライズルールの条件に基づいてパーソナライズされたコンテンツがWebサイトに表示されます。

******************************************************
コンポーネントのレイアウトをパーソナライズする
******************************************************

また、Webページでのコンポーネントの表示方法をパーソナライズすることもできます。

コンポーネントのレイアウトをパーソナライズするには

1. コンポーネントの個人設定ダイアログボックスで、コンポーネントの表示を個人設定を有効にします。これにより、[プレゼンテーション]フィールドが表示されます。

    .. image:: images/15ed64a2263cda.png
        :align: center
        :width: 400px
        :alt: コンポーネントのレイアウトをパーソナライズする

2. [プレゼンテーション］フィールドで |icon3| をクリックし、［レンダリングの選択］ダイアログボックスで、このパーソナライゼーションルールに関連付けられたコンテンツに使用するレンダリングを選択してから、［選択］をクリックします。

    .. image:: images/15ed64a226991e.png
        :align: center
        :width: 400px
        :alt: コンポーネントのレイアウトをパーソナライズする

.. note:: The new rendering must be compatible with the component.

*****************************************************************
パーソナライゼーション効果のトラッキングを有効または無効にする
*****************************************************************

パーソナライズ効果トラッキング機能を利用することで、Sitecoreはパーソナライズテストを実行することなく、パーソナライズルールの効果を計算することができます。トラッキングを有効にすると、コンポーネントへのトラフィックの10%が効果追跡に割り当てられます。これは、パーソナライズ対象グループに属する訪問者の5%が、コンポーネントのデフォルトバージョンを見ることを意味します。

.. important:: コンポーネントでパーソナライゼーションテストを開始する場合は、パーソナライゼーション効果のトラッキングを無効にする必要があります。

パーソナライゼーション効果の追跡を無効にするには

* [コンポーネントのパーソナライズ］ダイアログボックスで、［このコンポーネントのパーソナライゼーションの効果を追跡する］チェックボックスをオフにします。
* [OK] をクリックします。

************************************************
パーソナライズされたコンポーネントのプレビュー
************************************************

パーソナライズされたコンテンツをプレビューするには、エクスペリエンス エディタで、パーソナライズを追加したコンポーネントをクリックします。表示されるフローティング メニューで矢印をクリックすると、現在の条件の詳細が表示され、別の条件をクリックすると、そのコンポーネントに設定した他のコンテンツが表示されます。

この例では、訪問者のリードスコアが50以上の場合、コンポーネントにはパンフレットが表示されます。

    .. image:: images/15ed64a226e389.png
        :align: center
        :width: 400px
        :alt: パーソナライズされたコンポーネントのプレビュー

訪問者のリードスコアが50点以下の場合は、パンフレットが隠れてしまいます。

    .. image:: images/15ed64a2272915.png
        :align: center
        :width: 400px
        :alt: パーソナライズされたコンポーネントのプレビュー

.. important:: あなたのウェブサイトで使用する前にルールを公開する必要があります。

パーソナライズされたバリアントがライブのウェブサイト上でしばらく実行された後、 :doc:`コンポーネントに対するパーソナライズの効果 <analyzing-the-effect-of-personalization-on-a-component>` や :doc:`ページ全体に対するパーソナライズの効果 <the-personalized-experience-dialog-box>` を分析することができます。また、 :doc:`パーソナライゼーションのダッシュボード <using-the-personalization-dashboard>` または :doc:`アクティブなパーソナライズされた経験のリスト <using-the-active-personalized-experiences-list>` で、全ページのパーソナライゼーションデータを見ることができます。



.. tip:: 英語版 https://doc.sitecore.com/users/93/sitecore-experience-platform/en/walkthrough--personalizing-components.html