####################################
クローン
####################################

Sitecore では、クローンとは、元のアイテムの単なるコピーではなく、元のアイテムのフィールド値を継承したアイテムのことを指します。オリジナルのアイテムのフィールドを更新すると、クローンの対応するフィールドも更新されます。

したがって、アイテムをクローンすることは、コンテンツアイテムを一元化する方法と考えることができます。クローンを使用すると、コンテンツ ツリー全体にアイテムを配置し、コンテンツ ツリー内の中央の一箇所からコンテンツを制御することができます。例えば、Sitecoreに複数のウェブサイトがあり、それぞれが異なる国に対応している場合、すべてのサイトに共通するコンテンツアイテムを含むマスターウェブサイトを作成することができます。そして、それぞれの国のウェブサイトに対して、マスターウェブサイトのクローンを作成し、オリジナルのアイテムとクローンの間に接続を確立します。

.. note:: クローンの更新やメンテナンスは、通常のアイテムを更新するよりもコストのかかる作業になります。そのため、パフォーマンスを向上させるために、アイテム構造はできるだけシンプルにしておくことをお勧めします。クローンのクローンを作成すると複雑なループが発生したり、リソースを消費したりする可能性があるため、可能な限りクローンの作成は避けるべきです。

クローン内のフィールドを編集した後、元のアイテムで同じフィールドを編集すると、競合が発生し、競合を解決する方法を示唆する通知が表示されます。

*******
例
*******

以下の例では、オリジナルアイテムとクローンアイテムの関係を説明します。

* 元のアイテムのフィールドを編集して保存すると、クローンされたアイテムでこのフィールドが変更されていない場合、Sitecoreはクローンされたアイテムのすべてのフィールドを更新します。

.. image:: images/15eafd35692200.png
   :align: center
   :width: 400px
   :alt: クローン

.. note:: 複製されたアイテムでは、値フィールドの横にある「元の値」のテキストは、元のアイテムから値が変更されていないことを示しています。

* クローン内のフィールドを編集して保存すると、クローンのタイトルフィールドの横に[元の値]テキストが表示されなくなります。元のアイテムは変更されません。

* 元のアイテムのフィールドを編集して、クローンでフィールドが変更されている場合、クローンの［内容］タブに元のアイテムのフィールドが変更されたことを示すメッセージが表示されます。

.. image:: images/15eafd3569e212.png
   :align: center
   :width: 400px
   :alt: クローン

この葛藤を解決するためには、選択肢があります。

  * 元のアイテムを確認する
    元のアイテムを表示し、変更内容を確認することができます。

  * 変更を承認する
    元のアイテムのフィールドの値を、クローンの対応するフィールドにコピーします。フィールドのタイトルの横には、[元の値]のテキストが表示されます。

  * 変更を拒否する
    クローン内の既存のフィールド値を保持し、メッセージを非表示にします。

* 元のアイテムの下に小アイテムを作成すると、クローンの [コンテンツ] タブに、元のアイテムの下に新しい小アイテムが作成されたことを示す通知が表示されます。複製では、新しい小アイテムの複製を作成するかどうかを決定するための通知が表示されます。

.. image:: images/15eafd356a3db4.png
   :align: center
   :width: 400px
   :alt: クローン

* クローンがあるアイテムを削除すると、以下のようなメッセージが表示されます。

.. image:: images/15eafd356a9957.png
   :align: center
   :width: 400px
   :alt: クローン

メッセージの中で、Sitecore は、削除しようとしているアイテムのすべてのクローンと、もしあればサブアイテムのクローンをリストアップします。OK をクリックして元のアイテムを削除すると、クローンは現在のフィールド値を維持し、通常のコンテンツアイテムになります。

* ワークフロー内のアイテムをクローン化すると、ワークフローとワークフロー状態のプロパ ティがクローンにコピーされます。ワークフローのフィールド値がコピーされると、クローンのワークフロープロパティと元のアイテムのワークフロープロパティは接続されなくなります。そのため、元のアイテムのワークフロー状態を変更しても、クローンのワークフロー状態は変更されません。

************************
元のアイテムへのパス
************************

コンテンツ エディタのクローンでは、クローンの元のアイテムへのパスが表示されます。コンテンツ ツリーでクローンをクリックし、コンテンツ タブで、詳細設定セクションを展開し、__ソース フィールドを表示します。

.. note:: [詳細] セクションが表示されていない場合は、[表示] タブをクリックし、[標準フィールド] チェックボックスを選択します。

.. image:: images/15eafd356af633.png
   :align: center
   :width: 400px
   :alt: クローン


.. tip:: 英語版 https://doc.sitecore.com/users/93/sitecore-experience-platform/en/clones.html

.. toctree::
    :hidden:
    :maxdepth: 1
    
    clone-and-unclone-an-item
    clone-multiple-items
    the-impact-of-versions-on-clones
    